{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Amos\\\\gisApp\\\\frontend\\\\src\\\\layers\\\\InvasionLayer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Marker, useMap } from 'react-leaflet';\nimport L from 'leaflet';\n\n// ðŸ‘½ Alien icon with code\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst alienIcon = code => L.divIcon({\n  html: `<div style=\"font-size:24px;\">ðŸ‘½<span style=\"color:black; font-weight:bold; font-size:14px;\">${code}</span></div>`,\n  className: 'alien-icon',\n  iconSize: [30, 30]\n});\n\n// ðŸ›¸ Landing ship icon with code\nconst landingIcon = label => L.divIcon({\n  html: `<div style=\"display:flex; flex-direction:column; align-items:center;\">\n      <div style=\"background:black;color:white;font-size:10px;padding:1px 4px;border-radius:4px;margin-bottom:2px;\">${label}</div>\n      <div style=\"font-size:28px;\">ðŸ›¸</div>\n    </div>`,\n  className: 'landing-icon',\n  iconSize: [30, 42],\n  iconAnchor: [15, 21],\n  popupAnchor: [0, -30]\n});\nexport default function InvasionLayer({\n  data\n}) {\n  _s();\n  const map = useMap();\n  const [isReady, setIsReady] = useState(false);\n\n  // âœ… Wait for map to be ready before showing markers\n  useEffect(() => {\n    if (!map) return;\n    const timer = setTimeout(() => {\n      map.invalidateSize(); // Fix potential layout bugs\n      setIsReady(true);\n    }, 100); // Delay allows layout to stabilize\n\n    return () => clearTimeout(timer);\n  }, [map]);\n  if (!isReady) return null;\n  const landings = data.filter(f => {\n    var _f$properties;\n    return ((_f$properties = f.properties) === null || _f$properties === void 0 ? void 0 : _f$properties.type) === 'landing';\n  });\n  const aliens = data.filter(f => {\n    var _f$properties2;\n    return ((_f$properties2 = f.properties) === null || _f$properties2 === void 0 ? void 0 : _f$properties2.type) === 'alien';\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [landings.map((l, idx) => {\n      var _l$geometry;\n      const [lng, lat] = ((_l$geometry = l.geometry) === null || _l$geometry === void 0 ? void 0 : _l$geometry.coordinates) || [];\n      if (typeof lat !== 'number' || typeof lng !== 'number') return null;\n      return /*#__PURE__*/_jsxDEV(Marker, {\n        position: [lat, lng],\n        icon: landingIcon(l.properties.landingCode || '?')\n      }, `landing-${idx}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this);\n    }), aliens.map((a, idx) => {\n      var _a$properties, _a$geometry;\n      const id = ((_a$properties = a.properties) === null || _a$properties === void 0 ? void 0 : _a$properties.alienCode) || `A-${idx}`;\n      const [lng, lat] = ((_a$geometry = a.geometry) === null || _a$geometry === void 0 ? void 0 : _a$geometry.coordinates) || [];\n      if (typeof lat !== 'number' || typeof lng !== 'number' || lat < 20 || lat > 40 || lng < 30 || lng > 40) {\n        console.warn(`â›” Skipping alien ${id}: Out-of-bounds [lat: ${lat}, lng: ${lng}]`);\n        return null;\n      }\n      const stableKey = `alien-${id}-${lat.toFixed(4)}-${lng.toFixed(4)}`;\n      return /*#__PURE__*/_jsxDEV(Marker, {\n        position: [lat, lng] // âœ… lat, lng order\n        ,\n        icon: alienIcon(id)\n      }, stableKey, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true);\n}\n_s(InvasionLayer, \"BVauI6PTBxX+4eXr8aGYVjsUAnU=\", false, function () {\n  return [useMap];\n});\n_c = InvasionLayer;\nvar _c;\n$RefreshReg$(_c, \"InvasionLayer\");","map":{"version":3,"names":["React","useEffect","useState","Marker","useMap","L","jsxDEV","_jsxDEV","Fragment","_Fragment","alienIcon","code","divIcon","html","className","iconSize","landingIcon","label","iconAnchor","popupAnchor","InvasionLayer","data","_s","map","isReady","setIsReady","timer","setTimeout","invalidateSize","clearTimeout","landings","filter","f","_f$properties","properties","type","aliens","_f$properties2","children","l","idx","_l$geometry","lng","lat","geometry","coordinates","position","icon","landingCode","fileName","_jsxFileName","lineNumber","columnNumber","a","_a$properties","_a$geometry","id","alienCode","console","warn","stableKey","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/Amos/gisApp/frontend/src/layers/InvasionLayer.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Marker, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\n\r\n// ðŸ‘½ Alien icon with code\r\nconst alienIcon = (code) =>\r\n  L.divIcon({\r\n    html: `<div style=\"font-size:24px;\">ðŸ‘½<span style=\"color:black; font-weight:bold; font-size:14px;\">${code}</span></div>`,\r\n    className: 'alien-icon',\r\n    iconSize: [30, 30]\r\n  });\r\n\r\n// ðŸ›¸ Landing ship icon with code\r\nconst landingIcon = (label) =>\r\n  L.divIcon({\r\n    html: `<div style=\"display:flex; flex-direction:column; align-items:center;\">\r\n      <div style=\"background:black;color:white;font-size:10px;padding:1px 4px;border-radius:4px;margin-bottom:2px;\">${label}</div>\r\n      <div style=\"font-size:28px;\">ðŸ›¸</div>\r\n    </div>`,\r\n    className: 'landing-icon',\r\n    iconSize: [30, 42],\r\n    iconAnchor: [15, 21],\r\n    popupAnchor: [0, -30]\r\n  });\r\n\r\nexport default function InvasionLayer({ data }) {\r\n  const map = useMap();\r\n  const [isReady, setIsReady] = useState(false);\r\n\r\n  // âœ… Wait for map to be ready before showing markers\r\n  useEffect(() => {\r\n    if (!map) return;\r\n\r\n    const timer = setTimeout(() => {\r\n      map.invalidateSize(); // Fix potential layout bugs\r\n      setIsReady(true);\r\n    }, 100); // Delay allows layout to stabilize\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [map]);\r\n\r\n  if (!isReady) return null;\r\n\r\n  const landings = data.filter((f) => f.properties?.type === 'landing');\r\n  const aliens = data.filter((f) => f.properties?.type === 'alien');\r\n\r\n  return (\r\n    <>\r\n      {/* ðŸ›¸ Landing markers */}\r\n      {landings.map((l, idx) => {\r\n        const [lng, lat] = l.geometry?.coordinates || [];\r\n\r\n        if (typeof lat !== 'number' || typeof lng !== 'number') return null;\r\n\r\n        return (\r\n          <Marker\r\n            key={`landing-${idx}`}\r\n            position={[lat, lng]}\r\n            icon={landingIcon(l.properties.landingCode || '?')}\r\n          />\r\n        );\r\n      })}\r\n\r\n      {/* ðŸ‘½ Alien markers */}\r\n      {aliens.map((a, idx) => {\r\n        const id = a.properties?.alienCode || `A-${idx}`;\r\n        const [lng, lat] = a.geometry?.coordinates || [];\r\n\r\n        if (\r\n          typeof lat !== 'number' ||\r\n          typeof lng !== 'number' ||\r\n          lat < 20 || lat > 40 ||\r\n          lng < 30 || lng > 40\r\n        ) {\r\n          console.warn(`â›” Skipping alien ${id}: Out-of-bounds [lat: ${lat}, lng: ${lng}]`);\r\n          return null;\r\n        }\r\n\r\n        const stableKey = `alien-${id}-${lat.toFixed(4)}-${lng.toFixed(4)}`;\r\n\r\n        return (\r\n          <Marker\r\n            key={stableKey}\r\n            position={[lat, lng]} // âœ… lat, lng order\r\n            icon={alienIcon(id)}\r\n          />\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}